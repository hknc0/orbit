# Prometheus Configuration for Orbit Royale
global:
  scrape_interval: 3s          # Scrape every 3 seconds for real-time game metrics
  evaluation_interval: 3s
  external_labels:
    monitor: 'orbit-royale'

# Alerting configuration (optional, for future use)
alerting:
  alertmanagers: []

# Scrape configurations
scrape_configs:
  # =============================================================================
  # Prometheus self-monitoring
  # =============================================================================
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    scrape_interval: 15s

  # =============================================================================
  # Orbit Royale Game Server Metrics
  # =============================================================================
  - job_name: 'orbit-royale-api'
    static_configs:
      - targets: ['api:9090']
        labels:
          service: 'game-server'
          environment: 'docker'
    scrape_interval: 2s          # Fast scrape for real-time game metrics
    metrics_path: /metrics

  # =============================================================================
  # cAdvisor - Container Metrics (CPU, Memory, Network, Disk)
  # =============================================================================
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
    scrape_interval: 5s
    # Extract short container ID for easier identification
    # Run `docker ps` to map IDs to names
    metric_relabel_configs:
      - source_labels: [id]
        regex: '/docker/([a-f0-9]{12}).*'
        target_label: short_id
        replacement: '${1}'
